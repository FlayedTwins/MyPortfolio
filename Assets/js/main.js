!function($){var f,g,h,i,j,k,l,m,n,o,p,q=!1;function r(){(q?$("body").width():$(".content").width())<420?$("html").addClass("w420"):$("html").removeClass("w420")}function s(){$(".page").removeClass("active").hide();var a=$.address.path();if(a=a.slice(1,a.length),""==(a=-1!=C()?f:a)){var b=$("#header ul li").first().find("a").attr("href");a=b.slice(2,b.length),$.address.path(a)}Modernizr.csstransforms&&Modernizr.csstransforms3d?$("#"+a).show().removeClass("animated ").addClass("animated "+k):($("#"+a).fadeIn(),$(".page.active").hide()),$("#"+a).addClass("active"),$(".page.active").find(".cover").length?$("html").removeClass("not-on-cover-page").addClass("on-cover-page"):$("html").removeClass("on-cover-page").addClass("not-on-cover-page"),z(),-1!=a.indexOf(f)&&setTimeout(function(){t()},100),$("body").scrollTop(0),u()}function t(){if(g.data("isotope")){for(var b,c,d=g.width(),h=g.children(".hentry"),e=[{width:1200,columns:5},{width:900,columns:4},{width:600,columns:3},{width:320,columns:2},{width:0,columns:1}],a=0,i=e.length;a<i;++a){var f=e[a];if(d>f.width){b=f.columns;break}}h.each(function(e,f){var a=$(this).hasClass("x2")&&b>1?2:1,c=100*Math.floor(d/b)/d*a;$(this).css("width",c+"%")}),c=Math.floor(d/b),g.isotope().isotope("option",{masonry:{columnWidth:c}})}}function u(){$(".cover h1").fitText(l),$(".cover h2").fitText(m),$(".cover h3").fitText(n),$(".cover h3 span").fitText(o)}$(function(){$("iframe,video").length&&$("html").fitVids(),f=$(".portfolio").attr("id"),i=$("html").attr("data-inAnimation"),j=$("html").attr("data-outAnimation"),k=$("html").attr("data-safeModPageInAnimation"),l=$("html").attr("data-cover-h1-tune"),m=$("html").attr("data-cover-h2-tune"),n=$("html").attr("data-cover-h3-tune"),o=$("html").attr("data-cover-h3-span-tune");var e=C();$(".cover").each(function(a,b){$(this).css("background-image","url("+$(this).find(".cover-image-holder img").attr("src")+")")}),q="true"===$("html").attr("data-safeMod");var b=!!navigator.userAgent.match(/Trident\/7\./),c=navigator.userAgent.toLowerCase(),a=c.indexOf("android")> -1,d=a&&navigator.userAgent.indexOf("Opera")> -1;(q=q||!Modernizr.csstransforms||!Modernizr.csstransforms3d||960>$(window).width()||$.browser.msie||b||a||d)&&($("html").addClass("safe-mod"),s(),$.address.change(function(){s()})),-1==$.address.path().indexOf("/"+f)||q||setTimeout(function(){openMenu()},500),r(),$(window).resize(function(){r()}),$.address.change(function(){var a=C();-1!=a?A(a):-1!=$.address.path().indexOf("/"+f)&&B(!0,!1)}),g=$(".portfolio-items"),$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase()),(!$.browser.chrome||q)&&$("html").addClass("no-chrome"),$.browser.safari=$.browser.webkit&&!/chrome/.test(navigator.userAgent.toLowerCase()),h=($.browser.chrome||$.browser.safari)&&!q?"jquery":"best-available",g.length&&g.imagesLoaded(function(){if(g.isotope({itemSelector:".hentry",layoutMode:"fitRows"}),g.data("isotope")){var a=$("#filters");a.length&&a.find("a").on("click",function(){var a=$(this).attr("data-filter");return g.isotope({filter:a}),$(this).parent().addClass("current").siblings().removeClass("current"),!1})}t(),setTimeout(function(){g.isotope()},20),$(window).resize(function(){setTimeout(function(){t()},600)})}),q||(w(),$(window).resize(function(){x(),960>$(window).width()&&location.reload(!0)})),u(),$(".lightbox").each(function(a,b){$(this).attr("rel",$(this).attr("data-lightbox-gallery"))}),$("a[rel^='fancybox']").length&&$("a[rel^='fancybox']").fancybox({centerOnScroll:!0,padding:0,margin:($(window).width(),44),width:640>$(window).width()?320:640,height:640>$(window).width()?180:360,transitionOut:"none",overlayColor:"#000",overlayOpacity:".5",onStart:function(){$("#rm-container").addClass("rm-in rm-nodelay")},onClosed:function(){$("#rm-container").removeClass("rm-in")},onComplete:function(){$(this).attr("href").indexOf("soundcloud.com")>=0&&$("#fancybox-content").height(166)}}),$(".bar").each(function(){var a=$(this);a.find(".progress").css("width",a.attr("data-percent")+"%")}),$("a.ajax").live("click",function(){var a=$(this).attr("href"),b=$.address.baseURL();if(-1!==a.indexOf(b)){var c=a.length;e=a.slice(b.length+1,c),$.address.path("/"+e)}else e=a,$.address.path(f+"/"+e);return!1}),F.init()}),window.onload=function(){("8."==jQuery.browser.version.substring(0,2)||"7."==jQuery.browser.version.substring(0,2))&&setTimeout(function(){s()},2e3),setTimeout(function(){u()},1e3)};var v=[];function w(){q||$(".antiscroll-wrap").each(function(a,b){v[a]=$(this).antiscroll({x:!1,autoHide:"false"!=$("html").attr("data-autoHideScrollbar")}).data("antiscroll")})}function x(){setTimeout(function(){y(),w()},500)}function y(){$.each(v,function(a,b){v[a].rebuild()})}function z(){var a=$(".page.active").attr("id");$("#header nav ul a[href$="+a+"]").parent().addClass("current_page_item").siblings().removeClass("current_page_item")}function A(a){D();var b=$(".p-overlay:not(.active)").first();p=$(".p-overlay.active"),$("#rm-container").addClass("rm-in rm-nodelay"),p.length&&B(),b.empty().load($.address.baseURL()+"/"+a+" .portfolio-single",function(){b.imagesLoaded(function(){E(),$("html").addClass("p-overlay-on"),$(".portfolio-single").fitVids(),Modernizr.csstransforms&&Modernizr.csstransforms3d?b.removeClass("animated "+j+" "+i).addClass("animated "+i).show():b.fadeIn(),b.addClass("active")})})}function B(a,b){$("body").scrollTop(0),a&&(p=$(".p-overlay.active"),$("html").removeClass("p-overlay-on"),$("#rm-container").removeClass("rm-in"),b||$.address.path(f)),p.removeClass("active"),Modernizr.csstransforms&&Modernizr.csstransforms3d?(p.removeClass("animated "+i).addClass("animated "+j),setTimeout(function(){p.hide().removeClass(j).empty()},1010)):p.fadeOut().empty()}function C(){var b,a=$.address.value();if(-1!=a.indexOf("/"+f+"/")&&a.length>f.length+2){var c=a.length;b=a.slice(f.length+2,c)}else b=-1;return b}function D(){$(".loader").show()}function E(){$(".loader").hide()}var a,b,c,d,e,F=(b=(a=$("#rm-container")).find("div.rm-cover"),c=(a.find("div.rm-middle"),a.find("div.rm-right")),d=b.find("a.rm-button-open"),e=c.find(".rm-close"),init=function(){initEvents()},initEvents=function(){d.on("click",function(a){if(!q)return openMenu(),!1}),e.on("click",function(a){return closeMenu(),!1})},openMenu=function(){a.removeClass("rm-closed"),setTimeout(function(){a.addClass("rm-open")},10)},closeMenu=function(){a.removeClass("rm-open rm-nodelay rm-in"),setTimeout(function(){a.addClass("rm-closed")},850)},{init:init})}(jQuery),$(".images img").click(function(){$("#full-image").attr("src",$(this).attr("src")),$("#image-viewer").show()}),$("#image-viewer .close").click(function(){$("#image-viewer").hide()})